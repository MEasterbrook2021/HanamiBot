const fs = require("fs");
const { EmbedBuilder } = require("discord.js");

const { FindUserargs } = require("../../utils/exports/finduserargs_export.js");

exports.run = async (client, message, args, prefix) => {
	await message.channel.sendTyping();
	fs.readFile("./user-data.json", async (error, data) => {
		if (error) {
			console.log(error);
			return message.reply("An error occurred while reading user data.");
		}
		var server = "saber";
		var userargs = await FindUserargs(message, args, server, prefix);

		let user, userstats;

		var BaseUrl = `https://scoresaber.com/api`;

		var response = await fetch(`${BaseUrl}/player/{playerId}/full`, { method: "GET" });
		user = await response.json();
		if (user == undefined) {
			message.reply({ embeds: [new EmbedBuilder().setColor("Purple").setDescription(`**The player with the id \`${userargs}\` does not exist in Steam database**`)] });
			return;
		}

		// message.channel.send({ embeds: [await GetUserPage(firstPage, user, userstats, mode, RuleSetId, server)] });
	});
};
exports.name = "osu";
exports.aliases = ["osu", "o"];
exports.description = ["Displays the stats of a user\n\n**Parameters:**\n`username` get the stats from a username\n`-(gamemode)` get the stats of a particular gamemode"];
exports.usage = [`osu JustinNF -taiko\nosu YoruNoKen -taiko\nosu mrekk`];
exports.category = ["saber"];
